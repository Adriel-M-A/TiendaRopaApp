<Page
    x:Class="TiendaRopaApp.Views.ProductosPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:models="using:TiendaRopaApp.Models"
    mc:Ignorable="d">

    <Grid Padding="16">
        <StackPanel Spacing="12">

            <!-- 1) Título -->
            <TextBlock
        Text="Gestión de Productos"
        FontSize="24"
        FontWeight="SemiBold"/>

            <!-- 2) Fila de filtro + botón -->
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Spacing="8">
                <!-- Campo de búsqueda -->
                <TextBox
                      x:Name="FiltroTextBox"
                      PlaceholderText="Buscar por nombre o categoría…"
                      Width="300"
                      Text="{x:Bind ViewModel.TextoFiltro, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>

                <!-- Botón de nuevo producto -->
                <Button
                      Content="Nuevo producto"
                      Click="NuevoProducto_Click"/>
            </StackPanel>

            <!-- 3) Separador visual -->
            <Rectangle Height="1" Fill="#DDD" Margin="0,8"/>

            <!-- 4) Tabla de productos filtrados -->
            <ListView
                ItemsSource="{x:Bind ViewModel.ProductosFiltrados, Mode=OneWay}"
                SelectionMode="Single"
                IsItemClickEnabled="False"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch">

                <!-- Cabecera -->
                <ListView.Header>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="40"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="#"           Grid.Column="0" FontWeight="Bold"/>
                        <TextBlock Text="Nombre"      Grid.Column="1" FontWeight="Bold"/>
                        <TextBlock Text="Categoría"   Grid.Column="2" FontWeight="Bold"/>
                        <TextBlock Text="Color/Talle" Grid.Column="3" FontWeight="Bold"/>
                        <TextBlock Text="Stock"       Grid.Column="4" FontWeight="Bold"/>
                    </Grid>
                </ListView.Header>

                <!-- Plantilla de ítem -->
                <ListView.ItemTemplate>
                    <DataTemplate x:DataType="models:Producto">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="40"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock Text="{x:Bind ProductoId}"    Grid.Column="0"/>
                            <TextBlock Text="{x:Bind Nombre}"        Grid.Column="1"/>
                            <TextBlock Text="{x:Bind Categoria}"     Grid.Column="2"/>
                            <TextBlock Text="{x:Bind ColorTalle}"    Grid.Column="3"/>
                            <TextBlock Text="{x:Bind Stock}"         Grid.Column="4"/>
                        </Grid>
                    </DataTemplate>
                </ListView.ItemTemplate>

            </ListView>
        </StackPanel>
    </Grid>
</Page>